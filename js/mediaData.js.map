{"version":3,"sources":["mediaData.js"],"names":["getList","$","ajax","apiDomain","url","type","success","res","LoadingOverlay","data","i","str","console","log","append","title","excerpt","source","bindEvent","time","img","location","href","id","showList","on","window","concat","this","confirm","apiUrl","error","xhr","document","ready"],"mappings":"cACA,WAAC,SAAAA,IAECC,EAAA,QAASD,eAAU,QACjBC,EAAEC,KAAA,CACAA,IAAKC,UAAA,iCACLC,KAAKD,MACLE,KAAI,GAGJC,QAAS,SAAAC,GACPN,EAAE,QAAQO,eAAe,QAY/B,SAAkBC,GAChB,IACSC,EADLC,EAAM,GACV,IAASD,KAAKD,EAAdG,QAAAC,IAAcJ,EAAdC,IACEE,EAAAA,6CAAAA,OAiBiBE,SAAjBJ,GAAA,EAjBAE,yBAAAA,OAkBDH,EAAAC,GAAAK,MAlBCH,yBAAAA,OAmBHH,EAAAC,GAAAM,QAnBGJ,yBAAAA,OAMUH,EAAKC,GAAGO,OANlBL,yBAAAA,OAqBKM,EAATR,GAAqBN,IArBjBQ,yBAAAA,OAsBAH,EAAFC,GAAkBS,KAtBhBP,mCAAAA,OAuBAH,EAAAC,GAAAU,IAvBAR,2BAAAA,OAwBOS,EAAPX,GAAgBY,SAAhB,IAAA,IAxBAV,uFAAAA,OA0BsCH,EAAAC,GAAAa,GA1BtCX,6EAAAA,OA2BAH,EAAAC,GAAAa,GA3BAX,sDA8BEX,EAAA,eAAAa,OAAAH,GA3CAa,CAASjB,EAAIE,MAgDdR,EAAA,aACCwB,GAAA,QAAA,WAVJC,OAAAL,SAAAC,KAAA,yBAAAK,OAAA1B,EAAA2B,MAAAnB,KAAA,UAAAR,EAAE,eAAewB,GAAG,QAAQ,WAgBrBI,QAAA,OAAAF,OAAA1B,EAAA2B,MAAAnB,KAAA,OAAA,OAGLiB,UAAOL,CAFTS,OAAA,6BAHFP,GAAAtB,EAAA2B,MAAAnB,KAAA,YAlDIsB,MAAO,SAAAC,GACL/B,EAAE,QAAQO,eAAe,QACzBI,QAAQC,IAAImB,MAgDlB/B,EAAEgC,UAAUC,MAAM,WAEhBlC,IACAC,EAAE,YAAYwB,GAAG,QAAQ,WAEvBC,OAAOL,SAASC,KAAhB,yBAtEN","file":"mediaData.js","sourcesContent":["// Example starter JavaScript for disabling form submissions if there are invalid fields\r\n(function () {\r\n\r\n  function getList() {\r\n    $('body').LoadingOverlay(\"show\");\r\n    $.ajax({\r\n      url: apiDomain+'/api/v1/index/media/detail/all',\r\n      type: 'get',\r\n      data:{\r\n      },\r\n      success: function (res) {\r\n        $('body').LoadingOverlay(\"hide\");\r\n        // console.log(res);\r\n        showList(res.data)\r\n        bindEvent()\r\n      },\r\n      error: function (xhr) {\r\n        $('body').LoadingOverlay(\"hide\");\r\n        console.log(xhr)\r\n      }\r\n    });\r\n  }\r\n  \r\n  function showList(data) {\r\n    let str = '';\r\n    for (let i in data) {\r\n      console.log(data[i])\r\n      str=`\r\n        <tr>\r\n          <td scope=\"row\">${parseInt(i)+1}</td>\r\n          <td>${data[i].title}</td>\r\n          <td>${data[i].excerpt}</td>\r\n          <td>${data[i].source}</td>\r\n          <td>${data[i].url}</td>\r\n          <td>${data[i].time}</td>\r\n          <td><img src=\"${data[i].img}\"></td>\r\n          <td>${data[i].isEnable?'是':'否'}</td>\r\n          <td>\r\n            <div class=\"btn edit-btn btn-primary\" data-key=\"${data[i].id}\">修改</div>\r\n            <div class=\"btn delete-btn btn-danger\" data-key=\"${data[i].id}\">刪除</div>\r\n          </td>\r\n        </tr>\r\n      `\r\n      $('table tbody').append(str)\r\n    }\r\n  }\r\n\r\n  function bindEvent() {\r\n    $('.edit-btn').on('click',function () {\r\n      // console.log($(this).data('key'))\r\n      window.location.href = `mediaDataForm.html?id=${$(this).data('key')}`;\r\n    })\r\n    $('.delete-btn').on('click',function () {\r\n      // console.log($(this).data('key'))\r\n      let isDelete = confirm(`是否刪除${$(this).data('key')}?`)\r\n      if(isDelete){\r\n        // alert(\"已刪除\")\r\n        deleteApi({\r\n          apiUrl:`/api/v1/index/media/detail`,\r\n          id:$(this).data('key')\r\n        })\r\n      }else{\r\n        // alert(\"取消刪除\")\r\n      }\r\n    })\r\n  }\r\n  $(document).ready(function () {\r\n\r\n    getList();\r\n    $('.add-btn').on('click',function () {\r\n      // console.log($(this).data('key'))\r\n      window.location.href = `mediaDataForm.html`;\r\n    })\r\n\r\n    \r\n  })\r\n})()"]}