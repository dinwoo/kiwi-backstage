{"version":3,"sources":["all.js"],"names":["apiDomain","isPreview","sendFormData","data","console","getElementById","dataForm","document","method","$","attr","log","formData","forEach","object","key","value","json","JSON","stringify","ajax","url","concat","type","dataType","contentType","done","alert","bindEvent","forms","querySelectorAll","Array","prototype","slice","call","form","addEventListener","event","checkValidity","preventDefault","stopPropagation","classList","add","getUrlQuery","location","href","val","indexOf","ary","split","i","length","uploadFile","fileInput","FormData","files","timeout","processData","mimeType","parse","nextElementSibling","img","res","ready","localStorage","window","pathname","removeItem"],"mappings":"aACA,IAAIA,UAAW,6BADfC,WAAA,EACID,OAAS,GAKb,SAASE,aAAaC,GAAtBC,QAASF,IAAAA,GACPE,IAAAA,EAAYD,SAAZE,eAAA,YACIC,EAAWC,IAAAA,SAASF,GAKpBG,EAASC,EAAE,aAAaC,KAAK,UACjCN,QAAQO,IAAIH,GAIZI,IAAAA,EAASC,GAA0BC,EAAOC,QAAOC,SAAAA,EAAdD,GAAAD,EAAAC,GAAAC,IAAnCC,EAAAC,KAAAC,UAAAL,GACAV,QAAQO,IAAGO,YAAKC,GAGhBV,EAAEW,KAAK,CACLC,IAAG,GAAAC,OAAAtB,WAAAsB,OAAKtB,QACRuB,KAAMf,EACNgB,SAAW,OAAQC,YAAA,kCACnBA,KAAAA,IAAiDC,KAAA,SAAAvB,GACjDA,QAAMc,IAAAA,KACLS,KAAK,SAAUvB,GAChBC,QAAQO,IAAIR,GAPdwB,MAQQ,UAIT,SAAAC,UAAAzB,GAED,IAAA0B,EAASD,SAATE,iBAAyB,qBAKvBC,MAAMC,UAAUC,MAAMC,KAAKL,GAA3BE,QAAMC,SAANG,GAEIA,EAAKC,iBAAiB,SAAU,SAAUC,GACnCF,EAAKG,iBAIRlC,QAAQO,IAAI,MACZ0B,EAAME,iBACNF,EAAMG,kBACNpC,QAAQO,IAAIV,WACZC,aAAaC,KAPbkC,EAAME,iBACNF,EAAMG,mBASRL,EAAKM,UAAUC,IAAI,mBAClB,KAIT,SAASC,YAAY5B,GACnB,IAAIM,EAAMuB,SAASC,KACfC,EAAM,GAEV,IAAG,GAAHzB,EAAM0B,QAAH,KAGD,IAFA,IAAIC,EAAM3B,EAAI4B,MAAM,KAAK,GAAGA,MAAM,KAE9BC,EAAK,EAAAA,GAATF,EAAaG,OAAMA,EAAAA,IACjBH,EAAME,GAAHD,MAAA,KAAA,IAAAlC,IACD+B,EAAME,EAAIE,GAAGD,MAAM,KAAK,IAI9B,OAAOH,EAGT,SAASM,WAAWC,GAApB,IAAAlB,EAASiB,IAAAA,SACPjB,EAAIA,OAAO,OAAImB,EAAfC,MAAA,GAAA,YAQE9C,EAAAW,KAAA,CACAC,IAAA,gDACAb,OAAA,OACAgD,QAAA,EACAC,aAAe,EACfC,SAAQvB,sBAPVV,aAQQ,EACN4B,KAAAA,IACA3B,KAAA,SAAYiC,GAEZvD,OAZFiD,EAWQO,mBAAe5C,MAAAE,KAAAyC,MAAAxD,GAAAA,KAAA0D,IACd3C,KAAK4C,MAAZ3D,GAAAA,KAAA0D,MACAlC,KAAM,SAANmC,GAbF1D,QAAAO,IAAAmD,GAeDnC,MAAA,UAEDlB,EAAEF,UAAUwD,MAAM,WAKf,MAFMC,aAAQC,QAAOrB,SAErBqB,OAAArB,SAAAsB,SAAAnB,QAAA,cAAA,IADCkB,OAAOrB,SAASC,KAAhB,cAKAoB,EAAAA,kBAAgBpB,GAAhB,QAAA,WAFFmB,aAAAG,WAAA,QAPFF,OAAArB,SAAAC,KAAA","file":"all.js","sourcesContent":["// Example starter JavaScript for disabling form submissions if there are invalid fields\r\nlet apiDomain= 'http://kiwi.ponitor.com.tw';\r\nlet isPreview = false;\r\nlet apiUrl = '';\r\n\r\n\r\nfunction sendFormData(data) {\r\n  console.log(data)\r\n  let dataForm = document.getElementById('dataForm');\r\n  let formData = new FormData(dataForm);\r\n\r\n  // let url = $('#dataForm').attr('action')\r\n  // console.log(url)\r\n  let method = $('#dataForm').attr('method')\r\n  console.log(method)\r\n\r\n  //檢查formdata值\r\n  let object = {};\r\n  formData.forEach((value, key) => { object[key] = value });\r\n  let json = JSON.stringify(object);\r\n  console.log('formfata:'+json);\r\n\r\n  $.ajax({\r\n    url: `${apiDomain}${apiUrl}`,\r\n    type: method,\r\n    dataType : 'json', // 預期從server接收的資料型態\r\n    contentType : 'application/json; charset=utf-8', // 要送到server的資料型態\r\n    data: json,\r\n  }).done(function (data) {\r\n    console.log(data);\r\n  }).fail(function (res) {\r\n    console.log(res);\r\n    alert('操作失敗');\r\n  });\r\n}\r\n\r\nfunction bindEvent(data) {\r\n  // Fetch all the forms we want to apply custom Bootstrap validation styles to\r\n  let forms = document.querySelectorAll('.needs-validation')\r\n\r\n  // Loop over them and prevent submission\r\n  Array.prototype.slice.call(forms)\r\n    .forEach(function (form) {\r\n      form.addEventListener('submit', function (event) {\r\n        if (!form.checkValidity()) {\r\n          event.preventDefault()\r\n          event.stopPropagation()\r\n        }else{\r\n          console.log(\"OK\")\r\n          event.preventDefault()\r\n          event.stopPropagation()\r\n          console.log(isPreview)\r\n          sendFormData(data)\r\n        }\r\n\r\n        form.classList.add('was-validated')\r\n      }, false)\r\n    })\r\n}\r\n\r\nfunction getUrlQuery(key) {\r\n  let url = location.href;\r\n  let val = \"\";\r\n\r\n  if(url.indexOf('?')!=-1){\r\n    let ary = url.split('?')[1].split('&');\r\n\r\n    for(let i=0;i<=ary.length-1;i++){\r\n      if(ary[i].split('=')[0] == key){\r\n        val = ary[i].split('=')[1];\r\n      }\r\n    }\r\n  }\r\n  return val;\r\n}\r\n\r\nfunction uploadFile(fileInput) {\r\n  var form = new FormData();\r\n  form.append(\"file\", fileInput.files[0], \"json.png\");\r\n\r\n  var settings = {\r\n  };\r\n\r\n  $.ajax({\r\n    \"url\": \"http://kiwi.ponitor.com.tw/api/v1/file/upload\",\r\n    \"method\": \"POST\",\r\n    \"timeout\": 0,\r\n    \"processData\": false,\r\n    \"mimeType\": \"multipart/form-data\",\r\n    \"contentType\": false,\r\n    \"data\": form\r\n  }).done(function (data) {\r\n    fileInput.nextElementSibling.value=JSON.parse(data).data.img\r\n    return JSON.parse(data).data.img\r\n  }).fail(function (res) {\r\n    console.log(res);\r\n    alert('操作失敗');\r\n  });\r\n}\r\n\r\n$(document).ready(function () {\r\n  let user = localStorage.getItem('user');\r\n  // console.log(user)\r\n  if(user==null&&window.location.pathname.indexOf('login.html')<0){\r\n    window.location.href = `login.html`;\r\n  }\r\n\r\n  $('header .logout').on('click',function () {\r\n    localStorage.removeItem('user');\r\n    window.location.href = `login.html`;\r\n  })\r\n})"]}