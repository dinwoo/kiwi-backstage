{"version":3,"sources":["form.js"],"names":["isCreate","apiUrl","$","attr","parseInt","isMainPage","LoadingOverlay","ajax","getForm","url","concat","getUrlQuery","data","res","success","log","console","key","setForm","val","indexOf","append","html","i","length","inputItems","eq","find","j","nextElementSibling","setAttribute","on","bindEvent","nextTo","error","xhr","ready","isPublish"],"mappings":"cACA,WADA,IAAAA,EACCC,EAAYC,EAAA,cAAAC,KAAA,eACPH,EAAJE,EAAA,cAAAC,KAAA,eACIF,IAAWG,SAAAF,EAAF,cAAqBC,KAArB,oBAEb,SAAIE,IAGFH,EAAE,QAAQI,eAAe,QAD3BJ,EAAAK,KAASC,CACLC,IAAA,GAAAC,OAAQJ,WAARI,OAAQJ,GAARI,OAAFL,EAAA,WAAA,IAAAM,YAAA,OACEJ,KAAK,MACLE,KAAG,GAEHG,QAHK,SAAAC,GAKLC,EAAAA,QAASR,eAAUO,QACjBX,QAACa,IAAST,GAiBhB,SAAiBM,GACfI,IAAAA,IAAAC,KADFD,QAASE,IAAAA,GACPN,EAGEI,GADAA,QAAQD,IAAI,kCADdC,QAAWC,IAAXA,GACED,QAAQD,IAAIH,EAAAK,IACZ,GAAAD,EAAQD,QAAR,YACAC,EAAAC,GAGIf,EAAC,IAAAQ,OAAKO,IAAOE,IAAI,KADnBjB,EAAA,IAAAQ,OAAQO,IAAOE,IAAA,UAAf,GAEO,GAAAF,EAAAG,QAAA,SAAA,CACLlB,EAAAA,IAAAA,OAACe,IAAAI,OAADnB,EAAaiB,eAAAA,OAAbF,IAAAK,QACD,IAAA,IAAAC,EAAA,EAAAA,EAAAX,EAAAK,GAAAO,OAAAD,IAAA,CALHP,QAMUC,IAAIG,EAAAA,GAAQG,IAKlB,IAJD,IAAAE,EAAYJ,EAAAA,IAAAA,OAAbJ,EAAaI,YAAQK,GAAAH,GAAAI,KAAgBV,yBAI1BW,EAAI,EAAGA,EAAIH,EAAWD,OAAQI,IAHzCZ,QAAUD,IAAMQ,EAAIX,GAAKK,GAALf,EAAUsB,EAA9BI,IAA2CzB,KAAA,UACzCa,EAAAA,EAAYJ,IAAKK,KAAjB,QAAAL,EAAAK,GAAAM,GAAArB,EAAAuB,EAAAG,IAAAzB,KAAA,UACAsB,EAAIA,GAAUI,mBAAIC,aAAmBJ,MAAMC,EAAKV,GAAAM,GAAArB,EAAAuB,EAAAG,IAAhDzB,KAAA,UAEEa,EAAAA,sBAAgBe,GAAJ,SAAeN,WAE3BA,WAAAA,EAAWG,MAAGC,WAQlB3B,EAAC,IAAAQ,OAAKO,IAAOE,IAAIP,EAAKK,IALtBf,EAAC,IAAAQ,OAACO,IAAAd,KAAA,MAAsB4B,EAAGd,IAvC3BD,CAAQD,EAAIF,MACZK,UAAQL,CACRmB,SAAAA,EACEhC,WAAAA,EACAK,OAAAA,GAAAA,OAAUJ,GAAVI,OAAAA,EAFQ,UAAA,IAGRJ,OAAMgC,KAGTC,MAfI,SAAAC,GAgBLD,EAAAA,QAAO5B,eAAe,QACpBJ,QAACa,IAAST,MAkCVJ,EAAAA,UAACkC,MAAA,WAEFzB,YAAA,OACFX,GAAA,EACFQ,IAOGN,EAAE,oBAAoBiB,IAAIR,YAAY,QAL9ByB,GAEVpC,GAAIW,EACFX,MAEAE,GAAE,EAHJA,EAAA,sBAIuBC,KAAA,WAAA,YACrBH,UAAQ,CACRQ,SAAAA,EAFKP,OAGAA,EACLD,OAAQiC,KAINhC,EAAAA,WAAQA,GAAAA,QAFA,WAGRgC,WAAQA,IAQZ/B,EAAE,UAAU6B,GAAG,QAAQ,WAJrBM,WAAWN,MApFjB","file":"form.js","sourcesContent":["// Example starter JavaScript for disabling form submissions if there are invalid fields\r\n(function () {\r\n  let isCreate;\r\n  let apiUrl = $('.page-data').attr('data-apiUrl')\r\n  let nextTo = $('.page-data').attr('data-nextTo')\r\n  let isMainPage = parseInt($('.page-data').attr('data-isMainPage')) ? true : false;\r\n\r\n  function getForm() {\r\n    $('body').LoadingOverlay(\"show\");\r\n    $.ajax({\r\n      url: `${apiDomain}${apiUrl}${isMainPage ? '/publish' : '/' + getUrlQuery('id')}`,\r\n      type: 'get',\r\n      data: {\r\n      },\r\n      success: function (res) {\r\n        $('body').LoadingOverlay(\"hide\");\r\n        console.log(res);\r\n        setForm(res.data)\r\n        bindEvent({\r\n          isCreate,\r\n          isMainPage,\r\n          apiUrl: `${apiUrl}${isMainPage ? '/create' : ''}`,\r\n          nextTo: nextTo\r\n        });\r\n      },\r\n      error: function (xhr) {\r\n        $('body').LoadingOverlay(\"hide\");\r\n        console.log(xhr)\r\n      }\r\n    });\r\n  }\r\n\r\n  function setForm(data) {\r\n    console.log(data)\r\n    for (const key in data) {\r\n      console.log(\"------------------------------\")\r\n      console.log(key)\r\n      console.log(data[key])\r\n      if (key.indexOf('isEnable') >= 0) {\r\n        if (data[key]) {\r\n          $(`#${key}`).val('1')\r\n        } else {\r\n          $(`#${key}`).val('0')\r\n        }\r\n      } else if(key.indexOf('items')>= 0){\r\n        $(`#${key}`).append($(`.hidde-box .${key}`).html())\r\n        for (let i = 0; i < data[key].length; i++) {\r\n          console.log(data[key][i])\r\n          let inputItems = $(`#${key} .items`).eq(i).find('.form-bind-items-data');\r\n          for (let j = 0; j < inputItems.length; j++) {\r\n            console.log(data[key][i][$(inputItems[j]).attr('name')])\r\n            $(inputItems[j]).attr('value',data[key][i][$(inputItems[j]).attr('name')])\r\n            inputItems[j].nextElementSibling.setAttribute('src',data[key][i][$(inputItems[j]).attr('name')])\r\n          }\r\n        }\r\n        $(\"input[type='file']\").on('change', function () {\r\n          // console.log(\"upload file\")\r\n          uploadFile($(this)[0])\r\n        })\r\n      }else {\r\n        $(`#${key}`).val(data[key])\r\n        $(`.${key}`).attr('src', data[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  $(document).ready(function () {\r\n\r\n    if (getUrlQuery('id')) {\r\n      isCreate = false;\r\n      getForm();\r\n      $(\"input[name='id']\").val(getUrlQuery('id'))\r\n    } else if (isMainPage) {\r\n      isCreate = false;\r\n      getForm();\r\n    } else {\r\n      isCreate = true;\r\n      $(\"input[type='file']\").attr('required', 'required')\r\n      bindEvent({\r\n        isCreate,\r\n        apiUrl: apiUrl,\r\n        nextTo: nextTo\r\n      });\r\n    }\r\n\r\n    $('.submit').on('click',function () {\r\n      isPublish = true\r\n    })\r\n\r\n    $('.draft').on('click',function () {\r\n      isPublish = false\r\n    })\r\n\r\n  })\r\n})()"]}