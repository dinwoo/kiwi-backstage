{"version":3,"sources":["form.js"],"names":["isCreate","apiUrl","$","attr","parseInt","isMainPage","LoadingOverlay","ajax","getForm","url","concat","getUrlQuery","data","res","success","console","key","setForm","indexOf","val","html","length","i","eq","find","year_item_year","monthsData","append","year_item_itmes","j","k","monthsItems","replace","Array","isArray","log","inputItems","nextElementSibling","setAttribute","inputSelects","on","uploadFile","this","bindEvent","nextTo","error","xhr","ready","document"],"mappings":"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","file":"form.js","sourcesContent":["// Example starter JavaScript for disabling form submissions if there are invalid fields\r\n(function () {\r\n  let isCreate;\r\n  let apiUrl = $('.page-data').attr('data-apiUrl')\r\n  let nextTo = $('.page-data').attr('data-nextTo')\r\n  let isMainPage = parseInt($('.page-data').attr('data-isMainPage')) ? true : false;\r\n\r\n  function getForm() {\r\n    $('body').LoadingOverlay(\"show\");\r\n    $.ajax({\r\n      url: `${apiDomain}${apiUrl}${isMainPage ? '/publish' : '/' + getUrlQuery('id')}`,\r\n      type: 'get',\r\n      data: {\r\n      },\r\n      success: function (res) {\r\n        $('body').LoadingOverlay(\"hide\");\r\n        // console.log(res);\r\n        setForm(res.data)\r\n        bindEvent({\r\n          isCreate,\r\n          isMainPage,\r\n          apiUrl: `${apiUrl}${isMainPage ? '/create' : ''}`,\r\n          nextTo: nextTo\r\n        });\r\n      },\r\n      error: function (xhr) {\r\n        $('body').LoadingOverlay(\"hide\");\r\n        console.log(xhr)\r\n      }\r\n    });\r\n  }\r\n\r\n  function setForm(data) {\r\n    console.log(data)\r\n    for (const key in data) {\r\n      // console.log(\"------------------------------\")\r\n      // console.log(key)\r\n      // console.log(Array.isArray(data[key]))\r\n      if (key.indexOf('isEnable') >= 0) {\r\n        if (data[key]) {\r\n          $(`#${key}`).val('1')\r\n        } else {\r\n          $(`#${key}`).val('0')\r\n        }\r\n      } else if(key.indexOf('year_items') >= 0) {\r\n        $(`#year_items`).html('')\r\n        for (let i = 0; i < data[key].length; i++) {\r\n          $(`#year_items`).append($(`.hidde-box .year_items`).html())\r\n          $(`#year_items .years`).eq(i).find(\"input[name='year_item_year']\").val(data[key][i].year_item_year)\r\n          $(`#year_items .years`).eq(i).find('.months-box').html('')\r\n          let monthsData = data[key][i].year_item_itmes\r\n          for (let j = 0; j < monthsData.length; j++) {\r\n            $(`#year_items .years`).eq(i).find('.months-box').append($(`.hidde-box .month_items`).html())\r\n            let monthsItems = $(`#year_items .years`).eq(i).find('.months-box .months').eq(j).find('.form-bind-months-data')\r\n            for (let k = 0; k < monthsItems.length; k++) {\r\n              $(monthsItems[k]).attr('value',monthsData[j][$(monthsItems[k]).attr('name').replace('year_item_item_','')])\r\n            }\r\n          }\r\n        }\r\n      } else if(Array.isArray(data[key])){\r\n        $(`#${key}`).html('')\r\n        for (let i = 0; i < data[key].length; i++) {\r\n          $(`#${key}`).append($(`.hidde-box .${key}`).html())\r\n          console.log(data[key])\r\n          let inputItems = $(`#${key} .items`).eq(i).find('.form-bind-items-data');\r\n          for (let j = 0; j < inputItems.length; j++) {\r\n            // console.log(data[key][i][$(inputItems[j]).attr('name')])\r\n            $(inputItems[j]).attr('value',data[key][i][$(inputItems[j]).attr('name')])\r\n            inputItems[j].nextElementSibling.setAttribute('src',data[key][i][$(inputItems[j]).attr('name')])\r\n          }\r\n          let inputSelects = $(`#${key} .items`).eq(i).find('.form-bind-items-select');\r\n          for (let j = 0; j < inputSelects.length; j++) {\r\n            if(data[key][i][$(inputSelects[j]).attr('name')]){\r\n              $(inputSelects[j]).val('1')\r\n            }else{\r\n              $(inputSelects[j]).val('0')\r\n            }\r\n          }\r\n        }\r\n        $(\"input[type='file']\").on('change', function () {\r\n          // console.log(\"upload file\")\r\n          uploadFile($(this)[0])\r\n        })\r\n      }else {\r\n        $(`#${key}`).val(data[key])\r\n        $(`.${key}`).attr('src', data[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  $(document).ready(function () {\r\n\r\n    if (getUrlQuery('id')) {\r\n      isCreate = false;\r\n      getForm();\r\n      $(\"input[name='id']\").val(getUrlQuery('id'))\r\n    } else if (isMainPage) {\r\n      isCreate = false;\r\n      getForm();\r\n    } else {\r\n      isCreate = true;\r\n      $(\"input[type='file']\").attr('required', 'required')\r\n      bindEvent({\r\n        isCreate,\r\n        apiUrl: apiUrl,\r\n        nextTo: nextTo\r\n      });\r\n    }\r\n\r\n    $('.submit').on('click',function () {\r\n      isPublish = true\r\n    })\r\n\r\n    $('.draft').on('click',function () {\r\n      isPublish = false\r\n    })\r\n\r\n  })\r\n})()"]}