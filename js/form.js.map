{"version":3,"sources":["form.js"],"names":["isCreate","apiUrl","$","attr","parseInt","isMainPage","LoadingOverlay","ajax","getForm","url","concat","getUrlQuery","data","res","success","log","console","key","setForm","indexOf","val","Array","isArray","append","html","i","inputItems","eq","find","j","length","nextElementSibling","setAttribute","uploadFile","this","bindEvent","nextTo","error","xhr","ready","document","isPublish","on"],"mappings":"cACA,WADA,IAAAA,EACCC,EAAYC,EAAA,cAAAC,KAAA,eACPH,EAAJE,EAAA,cAAAC,KAAA,eACIF,IAAWG,SAAAF,EAAF,cAAqBC,KAArB,oBAEb,SAAIE,IAGFH,EAAE,QAAQI,eAAe,QAD3BJ,EAAAK,KAASC,CACLC,IAAA,GAAAC,OAAQJ,WAARI,OAAQJ,GAARI,OAAFL,EAAA,WAAA,IAAAM,YAAA,OACEJ,KAAK,MACLE,KAAG,GAEHG,QAHK,SAAAC,GAKLC,EAAAA,QAASR,eAAUO,QACjBX,QAACa,IAAST,GAiBhB,SAAiBM,GACfI,IAAAA,IAAAC,KADFD,QAASE,IAAAA,GACPN,EAGE,GAAA,GAAAK,EAAAE,QAAA,YACAP,EAAAK,GACIA,EAAAA,IAAAA,OAAIE,IAAQC,IAAA,KAEZlB,EAAC,IAAAQ,OAAAO,IAAKA,IAAL,UAEA,GAAAI,MAAAC,QAAYF,EAAIH,IAAjB,CACDf,EAAA,IAAAQ,OAAAO,IAAAM,OAAArB,EAAA,eAAAQ,OAAAO,IAAAO,QALH,IAMO,IAAGH,EAAAA,EAAMC,EAAAA,EAAQV,GAAKK,OAAMQ,IAAA,CAChCT,QAAAD,IAAKE,EAAOM,GAAAA,IACb,IAEE,IAAIG,EAAaxB,EAAC,IAAAQ,OAAKO,EAAL,YAAmBU,GAAGF,GAAGG,KAAK,yBAFxCC,EAAV,EAAiBA,EAAGjB,EAAUkB,OAA9BD,IACEb,QAAQD,IAAIH,EAAKK,GAAjBQ,GAAAvB,EAAAwB,EAAAG,IAAA1B,KAAA,UACAD,EAAIwB,EAAUG,IAAI1B,KAAA,QAAKc,EAALA,GAAAQ,GAAAvB,EAAmByB,EAAWE,IAAA1B,KAAA,UAI9CuB,EAAWG,GAAGE,mBAAmBC,aAAa,MAAMpB,EAAKK,GAAKQ,GAAGvB,EAAEwB,EAAWG,IAAI1B,KAAK,UADvFD,EAAAA,sBAAiBC,GAAK,SAAQS,WAE/BqB,WAAA/B,EAAAgC,MAAA,WAEHhC,EAAC,IAAAQ,OAACO,IAAAG,IAAAR,EAADK,IACCf,EAAA,IAAAQ,OAAAO,IAAAd,KAAA,MAAAS,EAAAK,IAxCFD,CAAQD,EAAIF,MACZK,UAAQL,CACRsB,SAAAA,EACEnC,WAAAA,EACAK,OAAAA,GAAAA,OAAUJ,GAAVI,OAAAA,EAFQ,UAAA,IAGRJ,OAAMmC,KAGTC,MAfI,SAAAC,GAgBLD,EAAAA,QAAO/B,eAAe,QACpBJ,QAACa,IAAST,MAmCVJ,EAAAA,UAACqC,MAAA,WAEJ5B,YAAA,OACFX,GAAA,EAMGQ,IAJFgC,EAAAA,oBAAgBpB,IAAYT,YAAA,QAExBA,GACFX,GAAW,EACXQ,MAFFR,GAIWK,EACTL,EAAAA,sBAAAG,KAAA,WAAA,YACAK,UAAO,CAFFR,SAAAA,EAILA,OAAQC,EACNmC,OAAAA,KAIAA,EAAAA,WAAQA,GAAAA,QAAAA,WAHAK,WAAV,IAOFvC,EAAE,UAAFwC,GAAA,QAAA,WACED,WAAY,MArFlB","file":"form.js","sourcesContent":["// Example starter JavaScript for disabling form submissions if there are invalid fields\r\n(function () {\r\n  let isCreate;\r\n  let apiUrl = $('.page-data').attr('data-apiUrl')\r\n  let nextTo = $('.page-data').attr('data-nextTo')\r\n  let isMainPage = parseInt($('.page-data').attr('data-isMainPage')) ? true : false;\r\n\r\n  function getForm() {\r\n    $('body').LoadingOverlay(\"show\");\r\n    $.ajax({\r\n      url: `${apiDomain}${apiUrl}${isMainPage ? '/publish' : '/' + getUrlQuery('id')}`,\r\n      type: 'get',\r\n      data: {\r\n      },\r\n      success: function (res) {\r\n        $('body').LoadingOverlay(\"hide\");\r\n        console.log(res);\r\n        setForm(res.data)\r\n        bindEvent({\r\n          isCreate,\r\n          isMainPage,\r\n          apiUrl: `${apiUrl}${isMainPage ? '/create' : ''}`,\r\n          nextTo: nextTo\r\n        });\r\n      },\r\n      error: function (xhr) {\r\n        $('body').LoadingOverlay(\"hide\");\r\n        console.log(xhr)\r\n      }\r\n    });\r\n  }\r\n\r\n  function setForm(data) {\r\n    console.log(data)\r\n    for (const key in data) {\r\n      // console.log(\"------------------------------\")\r\n      // console.log(key)\r\n      // console.log(Array.isArray(data[key]))\r\n      if (key.indexOf('isEnable') >= 0) {\r\n        if (data[key]) {\r\n          $(`#${key}`).val('1')\r\n        } else {\r\n          $(`#${key}`).val('0')\r\n        }\r\n      } else if(Array.isArray(data[key])){\r\n        $(`#${key}`).append($(`.hidde-box .${key}`).html())\r\n        for (let i = 0; i < data[key].length; i++) {\r\n          console.log(data[key][i])\r\n          let inputItems = $(`#${key} .items`).eq(i).find('.form-bind-items-data');\r\n          for (let j = 0; j < inputItems.length; j++) {\r\n            console.log(data[key][i][$(inputItems[j]).attr('name')])\r\n            $(inputItems[j]).attr('value',data[key][i][$(inputItems[j]).attr('name')])\r\n            inputItems[j].nextElementSibling.setAttribute('src',data[key][i][$(inputItems[j]).attr('name')])\r\n          }\r\n        }\r\n        $(\"input[type='file']\").on('change', function () {\r\n          // console.log(\"upload file\")\r\n          uploadFile($(this)[0])\r\n        })\r\n      }else {\r\n        $(`#${key}`).val(data[key])\r\n        $(`.${key}`).attr('src', data[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  $(document).ready(function () {\r\n\r\n    if (getUrlQuery('id')) {\r\n      isCreate = false;\r\n      getForm();\r\n      $(\"input[name='id']\").val(getUrlQuery('id'))\r\n    } else if (isMainPage) {\r\n      isCreate = false;\r\n      getForm();\r\n    } else {\r\n      isCreate = true;\r\n      $(\"input[type='file']\").attr('required', 'required')\r\n      bindEvent({\r\n        isCreate,\r\n        apiUrl: apiUrl,\r\n        nextTo: nextTo\r\n      });\r\n    }\r\n\r\n    $('.submit').on('click',function () {\r\n      isPublish = true\r\n    })\r\n\r\n    $('.draft').on('click',function () {\r\n      isPublish = false\r\n    })\r\n\r\n  })\r\n})()"]}