{"version":3,"sources":["login.js"],"names":["$","document","ready","forms","querySelectorAll","Array","prototype","slice","call","form","addEventListener","event","checkValidity","console","log","preventDefault","stopPropagation","data","login","getElementById","dataForm","url","attr","method","formData","forEach","object","key","value","json","JSON","stringify","ajax","concat","apiDomain","type","dataType","contentType","done","code","window","location","href","localStorage","fail","res","alert","classList","add"],"mappings":"aAuCKA,EAAAC,UAjBDC,MAAA,WAsBA,IAAIC,EAAQF,SAASG,iBAAiB,qBAGtCC,MAAMC,UAAUC,MAAMC,KAAKL,GAA3BE,QAAMC,SAANG,GAEIA,EAAKC,iBAAiB,SAAU,SAAUC,GACnCF,EAAKG,iBAKRC,QAAQC,IAAI,MACZH,EAAMI,iBACNJ,EAAMK,kBApDhB,SAAeC,GAAfJ,QAASK,IAATD,GACEJ,IAAAA,EAAYI,SAAZE,eAAA,YACIC,EAAWnB,IAAAA,SAASkB,GAGpBE,EAAMrB,EAAE,aAAasB,KAAK,UAC9BT,QAAQC,IAAIO,GACRE,EAASvB,EAAE,aAAasB,KAAK,UACjCT,QAAQC,IAAIS,GAIZC,IAAAA,EAASC,GAA0BC,EAAOC,QAAOC,SAAAA,EAAdD,GAAAD,EAAAC,GAAAC,IAAnCC,EAAAC,KAAAC,UAAAL,GACAb,QAAQC,IAAGgB,YAAKC,GAChBlB,QAAQC,IAAIgB,KAAAC,UAAYF,IAGxB7B,EAAEgC,KAAK,CACLX,IAAG,GAAAY,OAvBT,8BAuBSA,OAAKC,GACRC,KAAMZ,EACNa,SAAW,OAAQC,YAAA,kCACnBA,KAAAA,IAAiDC,KAAA,SAAArB,GACjDA,QAAMY,IAAAA,GACA,KAALS,EAAKC,MACN1B,aAAYI,QAAZ,OAAAA,EAAAA,MAGEuB,OAAOC,SAASC,KAAhB,cADAC,MAAAA,EAAAA,WADFC,KAAA,SAGKC,GACHC,QAAM7B,IAAI4B,GACXC,MAAA,UAuBK5B,KAPAP,EAAMI,iBACNJ,EAAMK,kBACNP,EAAKsC,UAAUC,IAAI,oBAN3B","file":"login.js","sourcesContent":["// Example starter JavaScript for disabling form submissions if there are invalid fields\r\n(function () {\r\n  let apiDomain= 'http://kiwi.ponitor.com.tw';\r\n\r\n\r\n  function login(data) {\r\n    console.log(data)\r\n    let dataForm = document.getElementById('dataForm');\r\n    let formData = new FormData(dataForm);\r\n\r\n    let url = $('#dataForm').attr('action')\r\n    console.log(url)\r\n    let method = $('#dataForm').attr('method')\r\n    console.log(method)\r\n\r\n    //檢查formdata值\r\n    let object = {};\r\n    formData.forEach((value, key) => { object[key] = value });\r\n    let json = JSON.stringify(object);\r\n    console.log('formfata:'+json);\r\n    console.log(JSON.stringify(json));\r\n\r\n    $.ajax({\r\n      url: `${apiDomain}${url}`,\r\n      type: method,\r\n      dataType : 'json', // 預期從server接收的資料型態\r\n      contentType : 'application/json; charset=utf-8', // 要送到server的資料型態\r\n      data: json,\r\n    }).done(function (data) {\r\n      console.log(data);\r\n      if(data.code==200){\r\n        localStorage.setItem('user', data.data);\r\n        window.location.href = `index.html`;\r\n      }else{\r\n        alert(data.message)\r\n      }\r\n    }).fail(function (res) {\r\n      console.log(res);\r\n      alert('操作失敗');\r\n    });\r\n  }\r\n\r\n  $(document).ready(function () {\r\n\r\n    let forms = document.querySelectorAll('.needs-validation')\r\n\r\n    // Loop over them and prevent submission\r\n    Array.prototype.slice.call(forms)\r\n      .forEach(function (form) {\r\n        form.addEventListener('submit', function (event) {\r\n          if (!form.checkValidity()) {\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            form.classList.add('was-validated')\r\n          }else{\r\n            console.log(\"OK\")\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            login()\r\n          }\r\n\r\n        }, false)\r\n      })\r\n    \r\n  })\r\n})()"]}